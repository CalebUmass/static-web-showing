<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Photo Gallery</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous"> <!--LINKS BOOTSTRAP-->
    <link href="style.css" rel="stylesheet"> <!--LINKS STYLE.CSS-->
</head>

<body>
    <main class="container-fluid"> <!--sets width to 100%-->

        <!--NAVBAR CODE (top of the screen)-->
       <!--NAVBAR-->
        <nav class="navbar navbar-light" id="navigationBar"> <!--Bootstrap code for navbar-->

            <div class="container-fluid" id="navigation"> <!--Bootstrap code for navbar-->

                <!--HOME BUTTON-->
                <a href="../Projects-Landing-Page-main-copy/projects-page.html" id="homeButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                        class="bi bi-house" viewBox="0 0 20 20">
                        <path
                            d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z" />
                    </svg>
                </a>

                
                <div id="navbarButtons" class="ms-auto"> <!--Contains all features of the navbar we want on the right side of the screen-->
                <!--EXPLANATION BUTTON-->
                <!-- Button that triggers modal -->
                    <button type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop" id="helpButton"> <!--Bootstrap formatting-->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                            class="bi bi-question-lg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M4.475 5.458c-.284 0-.514-.237-.47-.517C4.28 3.24 5.576 2 7.825 2c2.25 0 3.767 1.36 3.767 3.215 0 1.344-.665 2.288-1.79 2.973-1.1.659-1.414 1.118-1.414 2.01v.03a.5.5 0 0 1-.5.5h-.77a.5.5 0 0 1-.5-.495l-.003-.2c-.043-1.221.477-2.001 1.645-2.712 1.03-.632 1.397-1.135 1.397-2.028 0-.979-.758-1.698-1.926-1.698-1.009 0-1.71.529-1.938 1.402-.066.254-.278.461-.54.461h-.777ZM7.496 14c.622 0 1.095-.474 1.095-1.09 0-.618-.473-1.092-1.095-1.092-.606 0-1.087.474-1.087 1.091S6.89 14 7.496 14" />
                        </svg> <!--SVG acts as the home button-->
                    </button>

                    <!-- Modal --> <!--This is what appears when you click on the question button-->
                    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
                        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true"> <!--Bootstrap formatting-->
                        <div class="modal-dialog"> <!--Bootstrap formatting-->
                            <div class="modal-content"> <!--Bootstrap formatting-->
                                <div class="modal-header"> <!--Bootstrap formatting: this is the header of the popup-->
                                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Using this Website</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button> <!--Dismiss button that makes the modal hidden again-->
                                </div>
                                <div class="modal-body"> <!--Body text of the modal-->
                                    To navigate this website, there are a few tools you can utilize to find images
                                    quicker!</br>
                                    You can use <b><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-arrow-down-up" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd"
                                                d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5m-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5" />
                                        </svg></b> to sort the images in order of year or alphabetical order. <br>
                                    You can use the <b>search bar</b> to look up images or find images that match any
                                    text
                                    entry.<br>
                                    For a more guided search, you can click <b>&#9776;</b> and use any of the
                                    <b>filters</b>
                                    to search by pre-existing tags. <br>
                                    You can also use the <b>filter by range</b> function in the sidebar to filter by
                                    images
                                    from certain year ranges. <br><br>
                                    Please note that not all features are compatible with each other. The filter year by
                                    range sliders will ignore any of the other filters you select in the sidebar, as
                                    well as
                                    any searches you have made. Using the search bar will also override any filters you
                                    have
                                    selected. Filters, similarly, override the searchbar. The sort feature is compatible
                                    with search and filter. <br>
                                    If you want to apply filters but have already adjusted the range slider, you should
                                    click restore defaults prior to applying any filters. <br>
                                    If you want to restore all defaults and show all images, you can do so by clicking
                                    the
                                    <i><b>Restore Defaults</b></i> button. <br>
                                    To apply filters, you must click the <b>submit</b> button.
                                </div>
                                <div class="modal-footer"> <!--Popup footer-->
                                    <button type="button" data-bs-dismiss="modal" id="closeHelp">Close</button> <!--Close button at the bottom also closes the popup-->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--SORT FUNCTION BAR-->
                    <div class="sort"> <!--Contains the all the sort bar stuff-->
                        <div class="nav-item dropdown px-2" id="sortBar"> <!--Bootstrap formatting-->
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false"> <!--Bootstrap formatting-->
                                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="24" fill="currentColor"
                                    class="bi bi-arrow-down-up" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5m-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5" />
                                </svg> <!--SVG serves as the sort button-->
                            </a>
                            <!--This is all the dropdown options-->
                            <div class="dropdown-menu dropdown-menu-center" id="sortSelect">
                                <button value="default" class="dropdownOption"
                                    onclick="window.location.reload()">Default</button>
                                <hr class="dropdown-divider">
                                <button value="alphabetical" class="dropdownOption"
                                    onclick="sortImages('alphabetical')">A-Z</button>
                                <hr class="dropdown-divider">
                                <button value="revalphabetical" class="dropdownOption"
                                    onclick="sortImages('revalphabetical')">Z-A</button>
                                <hr class="dropdown-divider">
                                <button value="yearasc" class="dropdownOption" onclick="sortImages('yearasc')">Year
                                    (Ascending)</button>
                                <hr class="dropdown-divider">
                                <button value="yeardesc" class="dropdownOption" onclick="sortImages('yeardesc')">Year
                                    (Descending)</button>
                            </div>
                        </div>
                    </div>
                    <!--SEARCH BAR-->
                    <form class="d-flex" id="searchBar">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"
                            id="searchInput"> <!--me-2 controls positioning-->
                    </form>

                    <!--SIDE BAR-->
                    <button id="openbutton" class="openbtn" onclick="openNav()"><svg xmlns="http://www.w3.org/2000/svg"
                            width="24" height="24" fill="currentColor" class="bi bi-filter-square" viewBox="0 0 16 16">
                            <path
                                d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
                            <path
                                d="M6 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5" />
                        </svg></button> <!--This controls the button that opens the navbar-->
                    <div id="mySidebar" class="sidebar">
                        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                        <!--Filters-->
                        <form id="filterForm"> <!--This form is for EVERYTHING in the sidebar-->
                            <div class="accordion" id="accordionExample"> <!--All accordions are contained here-->
                               
                                <!--FILTER BY YEAR-->
                                <div class="accordion-item filter" id="Year" index="-1"> <!--Mostly bootstrap formatting. The index is set for the Javascript later-->
                                    <h2 class="accordion-header"> <!--This contains the text that is present when the accordion is closed-->
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseOne"
                                            aria-expanded="false" aria-controls="collapseOne">
                                            Filter by Year
                                        </button> <!--Makes the accordion open or collapse with JS-->
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body" id="accordion-body-2">
                                            <!--Search bar for filter by year-->
                                            <form>
                                                <input class="form-control me-2 searchPills" type="search"
                                                    placeholder="Search" aria-label="Search" id="searchSearchbyYear">
                                            </form>
                                            <!--All the pills created in the Javascript will appear here-->
                                        </div>
                                    </div>
                                </div>

                                <!--FILTER BY KEYWORD-->
                                <div class="accordion-item filter" id="Trench" index="0">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                            aria-expanded="false" aria-controls="collapseTwo">
                                            Filter by Keyword
                                        </button>
                                    </h2>
                                    <div id="collapseTwo" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body" id="accordion-body-1">
                                            <form>
                                                <input class="form-control me-2 searchPills" type="search"
                                                    placeholder="Search" aria-label="Search" id="searchSearchbyTrench">
                                            </form>
                                            <!--Pills will appear here-->
                                        </div>
                                    </div>
                                </div>

                                <!--YEAR RANGE SLIDER-->
                                <div class="accordion-item slider" id="yearSlider"> 
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#collapseThree" aria-expanded="true"
                                            aria-controls="collapseThree">
                                            Filter Year By Range
                                        </button>
                                    </h2>
                                    <div id="collapseThree" class="accordion-collapse collapse show"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body" id="slider-body">
                                            <div class="wrapper">
                                                <div class="values"> <!--These are used both for the visible text in the accordion that tells us what the year is, as well as for formatting the range slider-->
                                                    <span id="range1">
                                                        1975
                                                    </span>
                                                    <span> &dash; </span>
                                                    <span id="range2">
                                                        2025
                                                    </span>
                                                </div>
                                                <!--SLIDER STUFF-->
                                                <div class="contain" id="containSlider">
                                                    <div class="slider-track"></div> <!--The slider-track controls the track that the sliders are on-->
                                                    <!--To do a double sided slider, we need to make two sliders. Value initializes there initial value-->
                                                    <input type="range" min="1950" max="2050" value="1975" id="slider-1"
                                                        oninput="slideOne()">
                                                    <input type="range" min="1950" max="2050" value="2025" id="slider-2"
                                                        oninput="slideTwo()">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <button class="submitFilters" type="submit" id="submitFilters">Submit</button> <!--Submit button to submit the whole sidebar-->
                            </div>
                        </form>
                        <button id="restoreDefaults">Restore Defaults</button> <!--Clears all fields-->
                    </div>
                </div>

            </div>
        </nav>

        <!-------------------------------------------------------------------------------------------------------------------------->

        <!--PAGE BODY-->
        <div class="container py-5 text-center">
            <!--HEADING-->
            <h2 class="display-6 fw-bold py-5" id="heading">Gallery</h2>
            <!--GALLERY-->
            <div class="row mb-5 flex-wrap justify-content-center" id="galleryRow">
                <a class="col gx-4 image-item" id="img1" href="/static-web-showing/Lightbox-Gallery/media/2022/MM-22-10-1.png" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Alphabet, 2022</p>
                </a>

                <a class="col gx-4 image-item" id="img2" href="/static-web-showing/Lightbox-Gallery/media/2022/MM-22-9-1.png" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Misc Drawing, 2022</p>
                </a>


                <a class="col gx-4 image-item" id="img3"
                    href="/static-web-showing/Lightbox-Gallery/media/2022/FloreakCheeseMakingIllustration-1.png" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Cheese Making Illustration, 2022</p>
                </a>
                <a class="col gx-4 image-item" id="img4" href="/static-web-showing/Lightbox-Gallery/media/2022/alphabetroughsketch-1.png"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Alphabet Rough Sketch, 2022</p>
                </a>


                <a class="col gx-4 image-item" id="img5" href="/static-web-showing/Lightbox-Gallery/media/2018/RoofReconstructionC.JPG"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Roof Reconstruction, 2018</p>
                </a>


                <a class="col gx-4 image-item" id="img6" href="/static-web-showing/Lightbox-Gallery/media/2018/PathwayIllustration.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Pathway, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img7" href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018llustrationWeaving.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Weaving, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img8" href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationWomen.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Women, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img9" href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationLoom.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Loom, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img10" href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationKilns.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Kilns, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img11"
                    href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationInfillofWell.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Infill of Well, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img12" href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationEPOC42.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>EPOC 4, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img13" href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationEPOC4.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>EPOC 4, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img14"
                    href="/static-web-showing/Lightbox-Gallery/media/2018/MM2018IllustrationDomesticArchitecture.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Domestic Architecture, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img15" href="/static-web-showing/Lightbox-Gallery/media/2018/KilnReconstruction.JPG"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Kilns, 2018</p>
                </a>

                <a class="col gx-4 image-item" id="img16" href="/static-web-showing/Lightbox-Gallery/media/2015/WolfDrawing.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Wolf, 2015</p>
                </a>

                <a class="col gx-4 image-item" id="img17"
                    href="/static-web-showing/Lightbox-Gallery/media/1995/Section-OrientalizingandArchaicPhases,1995.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Orientalizing and Archaic Phases, 1995</p>
                </a>

                <a class="col gx-4 image-item" id="img18"
                    href="/static-web-showing/Lightbox-Gallery/media/1995/ReconstructionUpperBuilding,1995.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Upper Building, 1995</p>
                </a>

                <a class="col gx-4 image-item" id="img19" href="/static-web-showing/Lightbox-Gallery/media/1994/MM94-06.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Structure, 1994</p>
                </a>

                <a class="col gx-4 image-item" id="img20" href="/static-web-showing/Lightbox-Gallery/media/1994/MM94-04.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Structure Roof, 1994</p>
                </a>

                <a class="col gx-4 image-item" id="img21" href="/static-web-showing/Lightbox-Gallery/media/1994/MM94-02.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Antefix, 1994</p>
                </a>

                <a class="col gx-4 image-item" id="img22" href="/static-web-showing/Lightbox-Gallery/media/1994/MM94-01.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Antefix, 1994</p>
                </a>

                <a class="col gx-4 image-item" id="img23"
                    href="/static-web-showing/Lightbox-Gallery/media/1989/ReconstructedSection1S.E.Building,1989.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Southeast Building, 1989</p>
                </a>

                <a class="col gx-4 image-item" id="img24"
                    href="/static-web-showing/Lightbox-Gallery/media/1989/ReconstructedRoofElementsS.E.Building,Version2-1989.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Southeast Building Roof, 1989</p>
                </a>

                <a class="col gx-4 image-item" id="img25"
                    href="/static-web-showing/Lightbox-Gallery/media/1989/ReconstructedRoofElementsS.E.Building,Version2-1989-2.jpg"
                    data-toggle="lightbox" data-gallery="photo_gallery">
                    <p>Southeast Building Roof, 1989</p>
                </a>

                <a class="col gx-4 image-item" id="img26"
                    href="/static-web-showing/Lightbox-Gallery/media/1989/ReconstructedElevationS.E.Building,1989.jpg" data-toggle="lightbox"
                    data-gallery="photo_gallery">
                    <p>Southeast Building, 1989</p>
                </a>

                <!--ADD NEW PROJECTS ABOVE THIS COMMENT-->
                
                <!--FORMAT FOR ADDING PROJECT: 
                <a class="col gx-4 image-item" id="img##"
                href="YOUR URL HERE" data-toggle="lightbox" data-gallery="photo-gallery">
                    <p>SHORT DESCRIPTION, YEAR</p>
                </a>-->
                
            </div>

            <p id="noResultsMessage">
                No results found.
            </p>

            
            <!-------------------------------------------------------------------------------------------------------------------------->
                                                                ALL SCRIPTS
            <!-------------------------------------------------------------------------------------------------------------------------->

            <!-------------------------------------------------------------------------------------------------------------------------->
                                                            CONSTANTS AND VARIABLES
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script>
                //const search-- this gets the searchBar by id in the Controls Sidebar Movement Section
            </script>
            <!-------------------------------------------------------------------------------------------------------------------------->         
            <script> //CONTROLS SIDEBAR MOVEMENT
                 const search = document.getElementById("searchBar");


                function openNav() { //this gets called by the openbutton
                    document.getElementById("mySidebar").style.width = "300px"; //styling for the sidebar     
                    document.getElementById("openbutton").style.opacity = 0; //hide the openbutton
                    search.style.opacity = 0; //hide the search bar
                    search.classList.add('disabled'); //disable the search bar
                }

                function closeNav() { //this gets called by the X button in the sidebar
                    document.getElementById("mySidebar").style.width = "0"; //hides the sidebar
                    document.getElementById("openbutton").style.opacity = 1; //the openbutton becomes visible again
                    search.style.opacity = 1; //the search bar is visible again
                    search.classList.remove('disabled'); //search bar is enabled
                }
            </script>
            <!-------------------------------------------------------------------------------------------------------------------------->

            <!-------------------------------------------------------------------------------------------------------------------------->
                                                            CONSTANTS AND VARIABLES
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script>
                //const pills-- get all pills with class pill in the Function for Searching Pills in Side Bar Section
                //const searchByYear-- gets the search bar from the search by year accordion Function for Searching Pills in Side Bar Section
                //const searchByTrench-- gets the search bar from the search by description accordion Function for Searching Pills in Side Bar Section
            </script>
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script> //FUNCTION FOR SEARCHING FOR PILLS IN SIDE BAR
                const pills = document.getElementsByClassName('pill'); //get all pills with class pill
                const searchByYear = document.getElementById('searchSearchbyYear'); //gets the search bar from the search by year accordion
                const searchByTrench = document.getElementById('searchSearchbyTrench'); //gets the search bar from the search by description accordion

                function filterPills(event) {
                    const searchTerm = event.target.value.trim().toLowerCase(); //turn search to all lowercase (makes capitalization not an issue)
                    let matchCount = 0; //let matchCount start at 0

                    Array.from(pills).forEach(item => { //for each pill
                        const pillsValue = item.textContent.toLowerCase(); //turn the value of the pill to lowercase
                        if (searchTerm.length > 0 && pillsValue.includes(searchTerm)) { //if the search is not nothing AND the pill's value includes the search term
                            item.classList.add('pill--shown'); //give the pill the class pill--shown (this makes the pill visible)
                            matchCount++; //increment the matchCount
                        } else { //if the pill does not include the search
                            item.classList.remove('pill--shown'); //hide the pill
                        }
                    });
                }

                searchByYear.addEventListener('input', filterPills); //the search by year accordion calls this when it starts getting input
                searchByTrench.addEventListener('input', filterPills); //the search by description accordion calls this when it starts getting input
            </script>

            <!-------------------------------------------------------------------------------------------------------------------------->
            
            <!-------------------------------------------------------------------------------------------------------------------------->
                                                            CONSTANTS AND VARIABLES
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script>
                //const sortSelect-- get the whole sort section (the part that appears when the sort button is clicked) in the Script for Sorting
                //const rows-- get everything with class row (it is only one) in the Script for Sorting
                //const allImageItems-- create an array from every item with class .image-item in the Script for Sorting
            </script>
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script> //SCRIPT FOR SORTING
                const sortSelect = document.getElementById('sortSelect'); //get the whole sort section (the part that appears when the sort button is clicked)
                const rows = document.querySelectorAll('.row'); //get everything with class row (it is only one)

                const allImageItems = Array.from(document.querySelectorAll('.image-item')); //create an array from every item with class .image-item

                function extractYear(text) { //this function works to get the year from any text 
                    const match = text.match(/\b(19|20)\d{2}\b/); //matches this style of text (could be an issue if a year does not start with 19 or 20 but this is a problem for much later down the road)
                    return match ? parseInt(match[0]) : 0; //returns an array where the first item is the match, and if there is no match, it returns 0
                }

                function sortImages(method) {
                    const sorted = [...allImageItems]; //creates a new array of all image items so we don't modify the original allImageItems

                    if (method === 'alphabetical') { //if method is ALPHABETICAL
                        sorted.sort((a, b) => {
                            //compares the text of the image-items and tells the code which should come first. 
                            const aText = a.querySelector('p').textContent.trim().toLowerCase(); 
                            const bText = b.querySelector('p').textContent.trim().toLowerCase();
                            return aText.localeCompare(bText);
                        });
                    } else if (method === 'yearasc') { //if the method is ASCENDING
                        sorted.sort((a, b) => {
                            const aYear = extractYear(a.querySelector('p').textContent);
                            const bYear = extractYear(b.querySelector('p').textContent);
                            return aYear - bYear;
                        });
                    } else if (method === 'yeardesc') { //if the method is DESCENDING
                        sorted.sort((a, b) => {
                            const aYear = extractYear(a.querySelector('p').textContent);
                            const bYear = extractYear(b.querySelector('p').textContent);
                            return bYear - aYear;
                        });
                    } else if (method === 'revalphabetical') { //if the method is REVERSE ALPHABETICAL
                        sorted.sort((a, b) => {
                            const aText = a.querySelector('p').textContent.trim().toLowerCase();
                            const bText = b.querySelector('p').textContent.trim().toLowerCase();
                            return bText.localeCompare(aText);
                        })
                    }

                    const galleryRow = document.getElementById('galleryRow'); //get the row that contains the gallery
                    galleryRow.innerHTML = ''; //clear existing items
                    sorted.forEach(item => galleryRow.appendChild(item)); //Reappend sorted items
                }

                sortSelect.addEventListener('change', () => { //called when the sort method is changed
                    const method = sortSelect.value; //get the method that was selected
                    if (method === 'default') { // Restore default order of images without reloading
                        const galleryRow = document.getElementById('galleryRow');
                        galleryRow.innerHTML = '';
                        allImageItems.forEach(item => galleryRow.appendChild(item));
                    } else { //call sort images with the select method
                        sortImages(method);
                    }
                });
            </script>

            <!-------------------------------------------------------------------------------------------------------------------------->
            <!-------------------------------------------------------------------------------------------------------------------------->
                                                            CONSTANTS AND VARIABLES
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script>
                //const filterAccordions-- this gets all the accordion-item filters
                //const imageItems-- this gets all of the image-Items
                //tagsSet-- A set of arrays containing information about each image item. At index 0 of each array, we have the description of the image, and at index 1, we have the year the image was made. It is a set so there are not duplicate tags.
                //const newTag-- the brand new pill button we are making for each tag
            </script>
            <!-------------------------------------------------------------------------------------------------------------------------->
            <script> //SCRIPT TO AUTOGENERATE PILLS
                function makingTags() { //this function is for creating the pill tags
                    const filterAccordions = document.getElementsByClassName('accordion-item filter'); //this gets all the accordion-item filters
                    const imageItems = document.getElementsByClassName("image-item"); //this gets all of the image-Items

                    Array.from(filterAccordions).forEach(filter => { //for each filter
                        let tagsSet = new Set(); //initialize a new set that will hold all the 

                        Array.from(imageItems).forEach(item => {
                            const textArray = item.querySelector('p').textContent.split(',').map(tag => tag.trim());
                            const theIndex = filter.getAttribute("index");
                            const theIndexNum = parseInt(theIndex)
                            const unformattedTag = textArray.at(theIndexNum);
                            const tag = unformattedTag; 
                            tagsSet.add(tag); //this adds an array to the set for each image-item. At index 0 of each array, we have the description of the image, and at index 1, we have the year the image was made.
                        })

                        tagsSet.forEach(tag => { //for each array in tagset
                            const newTag = document.createElement("button"); //newTag is the brand new pill button we are making for each tag
                            console.log("This is the tag ", tag);

                            console.log("This is filter.id ", filter.id);
                            if (filter.id === "Year") { //we do this if the filter we are iterating through is the year filter (because we need to check that there is a year included)
                                try {
                                    let testingifYear = parseInt.tag(); //we try to get parse the tag as an integer
                                    console.log(testingifYear);
                                    newTag.id = `${tag}`; //if it works, we make the id and the text content equivalent to its year
                                    newTag.textContent = tag;
                                } catch { //if it doesn't work, we make a new tag called unknown.
                                    newTag.id = "Unknown"; 
                                    newTag.textContent = "Unknown";
                                } finally { //run this after we do the try--catch
                                    newTag.classList.add("pill"); //add the pill class to the new pill
                                    newTag.classList.add(`pill${filter.id}`); //add another class to the pills that is pill + the name of the filter (i.e. pillYear)
                                    newTag.setAttribute("type", "button"); //make the pill type="button"
                                    const currentAccordion = filter; 
                                    const accordionBody = currentAccordion.querySelector('.accordion-body'); //append the new pill to the accordion
                                    if (accordionBody) {
                                        accordionBody.appendChild(newTag);
                                    }
                                }
                            } else { //if the type of filter is not year, then do the following (it is the same as before, but not a check for if there is a year
                                newTag.classList.add("pill");
                                newTag.classList.add(`pill${filter.id}`);
                                newTag.setAttribute("type", "button");
                                newTag.id = `${tag}`;
                                newTag.textContent = tag;
                                const currentAccordion = filter;
                                const accordionBody = currentAccordion.querySelector('.accordion-body');
                                if (accordionBody) {
                                    accordionBody.appendChild(newTag);
                                }
                            }
                        })
                    })
                }

                document.addEventListener("DOMContentLoaded", () => { //add event listener for when the page loads
                    makingTags(); //run the making tags function as soon as the page loads
                    document.querySelectorAll(".pill").forEach(pill => { //iterate through the pills (after they are created)
                        pill.addEventListener("click", () => { //add an event listener to when the pills are clicked
                            pill.classList.toggle("pill--active"); //toggle the pill--active class on and off
                            const accordion = pill.closest('.accordion-item'); //finds the element's parent accordion
                            const hasActivePill = accordion && accordion.querySelector('.pill.pill--active') !== null; //if the accordion exists and the accordion has a child with class .pill.pill--active
                            if (accordion) { 
                                if (hasActivePill) {
                                    accordion.classList.add('hasActive'); //if the accordion has an active pill, give it the class hasActive
                                } else {
                                    accordion.classList.remove('hasActive'); //if the accordion does not have an active pill, remove the class hasActive
                                }
                            }
                        });
                    });
                });
            </script>

            <!-------------------------------------------------------------------------------------------------------------------------->
            <script>
                //ALL CONSTANTS
                let sliderOne = document.getElementById("slider-1"); //this is the left slider (minimum)
                let sliderTwo = document.getElementById("slider-2"); //this is the right slider (maximum) 
                let sliderOneDefault = sliderOne.getAttribute("value"); //gets the value of slider 1 (what the user has set it to)
                let sliderTwoDefault = sliderTwo.getAttribute("value"); //gets the value of slider 2 (what the user has set it to)
                let displayValOne = document.getElementById("range1"); //the displayed value for slider 1
                let displayValTwo = document.getElementById("range2"); //the displayed value for slider 2
                let minGap = 0; //minimum gap between the year slider is 0 (makes sure they do not overlap)
                let sliderTrack = document.querySelector(".slider-track"); //the track that the sliders are both on
                let sliderMaxValue = document.getElementById("slider-1").max; //the maximum value that the slides can be
                const accordions = document.getElementsByClassName("accordion-item"); //each accordion item (type of filter)
                const formWatch = document.getElementById('filterForm'); //the form that contains all the filters
                const imagestoFilter = document.getElementsByClassName('image-item'); //get all the images and their data
                const intOneDef = parseInt(sliderOneDefault); //the default value of slider 1 as an integer
                const compareMin = parseInt(sliderOne.value); //the set value of slider 1 as an integer
                const intTwoDef = parseInt(sliderTwoDefault);  //the default value of slider 2 as an integer
                const compareMax = parseInt(sliderTwo.value); //the set value of slider 2 as an integer
                const sliderContainer = document.getElementById("containSlider"); //the container for the whole slider
                const allthePills = document.getElementsByClassName("pill"); //gets the pills
                const yearSearch = document.getElementById("searchSearchbyYear"); //the search form in the filter by year section
                const trenchSearch = document.getElementById("searchSearchbyTrench"); //the search form in the filter by keyword section
                const restoreDef = document.getElementById("restoreDefaults") //restore defaults button

                //SCRIPT FOR SEARCHING WHOLE WEBPAGE
                const searchForm = document.getElementById('searchBar'); //the main searchbar at the top
                const searchInput = document.getElementById('searchInput'); //the user input in the search bar
                const imageItems = document.getElementsByClassName("image-item"); //image items
                const noResultsMessage = document.getElementById('noResultsMessage'); //the no results message

                function searchImages() {
                    const searchTerm = searchInput.value.trim().toLowerCase(); //turn the user input into lower case (searching is not case sensitive)
                    let matchCount = 0; //initialize the match count at 0

                    Array.from(imageItems).forEach(item => { //for each image in the array
                        const imageName = item.querySelector('p').textContent.toLowerCase(); //turn the paragraph text into all lower case
                        if (imageName.includes(searchTerm)) { //if the paragraph text of the image contains the searched term
                            item.setAttribute('data-toggle', 'lightbox'); //show the image in the lightbox view
                            item.setAttribute('data-gallery', 'photo_gallery'); //show the image in the gallery
                            item.classList.remove('hidden'); //remove the hidden class
                            matchCount++; //increment the matchCount
                        } else {
                            item.removeAttribute('data-toggle'); //remove the image from the lightbox
                            item.removeAttribute('data-gallery'); //remove the image from the image gallery
                            item.classList.add('hidden');; //add the hidden class
                        }
                    });

                    noResultsMessage.style.display = matchCount === 0 ? 'block' : 'none'; //if the matchCount is 0, show the no results message
                }


                searchInput.addEventListener('input', function () {//event listener is triggered when the user starts inputting into the search bar
                    //when the search bar is being typed into, all the pills get cleared 
                    Array.from(allthePills).forEach(pill => { 
                        pill.classList.remove('pill--active');
                        pill.classList.remove('pill--shown');
                        //clear the searchbars in the sidebar
                        yearSearch.value = ''; 
                        trenchSearch.value = '';
                    });
                    //set the slider values back to their default
                    sliderOne.value = sliderOneDefault;
                    sliderTwo.value = sliderTwoDefault;
                    //display the default values for the slider
                    displayValOne.textContent = sliderOneDefault;
                    displayValTwo.textContent = sliderTwoDefault;
                    //call the fillColor function to change the color of the slider (so it lines up with the circles on either side), and toggle the "slider--active" class off
                    fillColor();
                    sliderContainer.classList.remove("slider--active");
                    
                    //close the navigation bar, then run the searchImages() function
                    closeNav();
                    searchImages();
                });

                //when the search gets submitted, do not reload the page
                searchForm.addEventListener('submit', function (event) {
                    event.preventDefault(); // Stop the form from reloading the page
                }
                );

                //BASIC SLIDER CODE (this just makes the slider move and adjust the display numbers and colors, but not how the code processes the slider's info)
                window.onload = function () { //run slideOne() and sliderTwo() as soon as the website opens
                    slideOne();
                    slideTwo();
                };

                function slideOne() {
                    if (parseInt(sliderTwo.value) - parseInt(sliderOne.value) <= minGap) { //if the gap between the two sliders is less than or equal to the minGap
                        sliderOne.value = parseInt(sliderTwo.value) - minGap; //change the value of slider one so it is exactly the value of minGap away from slider 2
                    }
                    displayValOne.textContent = sliderOne.value; //display the value of slider 1
                    fillColor(); //run the fill color function (below)
                }
                function slideTwo() {
                    if (parseInt(sliderTwo.value) - parseInt(sliderOne.value) <= minGap) {
                        sliderTwo.value = parseInt(sliderOne.value) + minGap; //change the value of slider two so it is exactly the value of minGap away from slider 1
                    }
                    displayValTwo.textContent = sliderTwo.value; //display the value of slider 2
                    fillColor(); //run the fillColor function (below)
                }
                function fillColor() { //this controls how color appears between the two sliders, but not on either side of them.
                    const min = parseInt(sliderOne.min); // 1950
                    const max = parseInt(sliderOne.max); // 2050
                    
                    //decide how much of the slider is what color using percentages. +/- 5 are just for better visuals
                    const percent1 = (((parseInt(sliderOne.value) - min) / (max - min)) * 100) - 5; 
                    const percent2 = (((parseInt(sliderTwo.value) - min) / (max - min)) * 100) + 5;

                    sliderTrack.style.background = `linear-gradient(to right, #dadae5 ${percent1}%, #9a6f55 ${percent1}%, #9a6f55 ${percent2}%, #dadae5 ${percent2}%)`; //this controls the color
                }
                
                //CODE FOR GIVING ACCORDIONS THE TAG "IS ACTIVE"
                function addClasstoAccordions() {
                    Array.from(accordions).forEach(acc => { //iterate through each accordion
                        const pills = acc.querySelectorAll('.pill'); //find all the pills in the accordion
                        const hasActive = Array.from(pills).some(pill => pill.classList.contains('pill--active')); //check to see if any of the pills have the class "pill--active"
                        if (hasActive) { 
                            acc.classList.add('isActive'); //if there are active pills, give the accordion class "isActive"
                        } else {
                            acc.classList.remove('isActive'); //if there aren't, remove the "isActive" class
                        }
                    });
                }

                //SLIDER SCRIPTS
                //TOGGLE SLIDER ACTIVE
                function sliderClassToggle() {
                    const min = parseInt(sliderOne.value); //the minimum is the inputted value of the left slider
                    const max = parseInt(sliderTwo.value); //the maximum is the inputted value of the right slider
                    if (min !== intOneDef || max !== intTwoDef) { //if at least one of the sliders is not in its default position
                        sliderContainer.classList.add("slider--active"); //give the sliderContainer the class "slider--active"
                    } else {
                        sliderContainer.classList.remove("slider--active"); //if neither slider has been moved, remove the slider--active class
                    }
                }
                //run this code as soon as there is input in either slider
                sliderOne.addEventListener('input', sliderClassToggle); 
                sliderTwo.addEventListener('input', sliderClassToggle);


                //HOW THE SLIDER WORKS AS A FILTER
                function filterYearwithSlider() {
                    //clear the search bars in the sidebar
                    yearSearch.value = ''; 
                    trenchSearch.value = '';

                    //remove the pill--active classes and the pill--shown classes (just makes sure that the pills do not conflict with the slider)
                    Array.from(allthePills).forEach(pill => {
                        pill.classList.remove('pill--active');
                        pill.classList.remove('pill--shown');
                    });

                    //clear the search bar for no conflict
                    searchInput.value = '';

                    const min = parseInt(sliderOne.value); //the default value of the min slider
                    const max = parseInt(sliderTwo.value); //the default value of the max slider
                    Array.from(imagestoFilter).forEach(image => { //for each image
                        const imageDescription = image.querySelector('p').textContent; //get the paragraph text of each image
                        const splitDescription = imageDescription.split(","); //split it at the comma
                        const textYear = splitDescription[1] && splitDescription[1].trim(); //get index one of the string (which would be the year), and trim the whitespace
                        const imageYear = parseInt(textYear); //convert it to an int (makes it easier to do inequalities)

                        if (!isNaN(imageYear) && imageYear >= min && imageYear <= max) { //if the year of the image is a number and is between the year sliders range, then show it
                            image.classList.remove('hidden');
                            image.setAttribute('data-toggle', 'lightbox');
                            image.setAttribute('data-gallery', 'photo_gallery');
                        } else { //if it doesn't meet both parameters, hide the image
                            image.classList.add('hidden');
                            image.removeAttribute('data-toggle');
                            image.removeAttribute('data-gallery');
                        }
                    });
                }


                //CODE FOR LOGGING ACTIVE FILTERS
                function getCount() { //returns a set of all the active accordions 
                    addClasstoAccordions(); //call the addClasstoAccordions to add the active class to all active accordions
                    const totalAccordions = document.getElementsByClassName("accordion-item"); //get all of the accordion items
                    const usedVals = new Set() //create an empty set
                    let i = 0; //initialize i at 0

                    Array.from(totalAccordions).forEach(accordi => { //for each accordion
                        if (accordi.classList.contains('isActive')) {//if it has the isActive class
                            i += 1; //add 1 to i
                            const toAdd = accordi.id; //toAdd is the accordion's id
                            usedVals.add(toAdd) //thet toAdd to the se
                        };

                    })
                    return usedVals; //returns a set of all the active accordions 
                }



                //SCRIPT FOR USING PILL FILTERS TO SEARCH IN GENERAL

                function filteringImages() {

                    const imageidmap = new Map(); //initialize a map to hold image id, value pairs. 

                    //a for loop that adds all image-items to imageidmap with a starting value of 0.
                    Array.from(imagestoFilter).forEach(block => {
                        if (block.id) {
                            imageidmap.set(block.id, 0);
                        }
                    });

                    //call the getCount function to find out which accordions are active

                    const setofActiveAccordions = getCount();

                    //if/else based on length of "setofActiveAccordions"

                    if (sliderContainer.classList.contains('slider--active')) { //if the slider is active, use the slider to filter and ignore the pills
                        filterYearwithSlider(); //call the filterYearwithSlider function to show only the images in the filtered year
                    } else if (setofActiveAccordions.size === 0) {
                        Array.from(imagestoFilter).forEach(varb => {
                            //if the length of setofActiveAccordions is 0 (no active filters), all image-items on the page are shown.
                            varb.classList.remove('hidden');
                            varb.setAttribute('data-toggle', 'lightbox');
                            varb.setAttribute('data-gallery', 'photo_gallery');
                        })
                    } else {
                        Array.from(accordions).forEach(filter => { //iterate through each accordion-item
                            const accordid = filter.id; //the id of each accordion-item
                            const pills = filter.querySelectorAll('.pill'); //getting all of the child pills of each accordion-item 
                            const pillsset = new Set(); //set of pill ids
                            Array.from(pills).forEach(pill => {//iterate through each pill
                                if (pill.classList.contains("pill--active")) { //if the pill has the pill--active class:
                                    const pillid = pill.id;
                                    pillsset.add(pillid); //add the pill id to pillsset
                                }
                            });
                            Array.from(imagestoFilter).forEach(imageitem => { //iterate through each image item
                                let matchescount = 0; //initialize matchescount at 0 for each pill
                                pillsset.forEach(identifier => { //iterate through each pill's id
                                    const text = imageitem.querySelector('p').textContent; //a constant for the <p> text of each image item
                                    if (text.includes(identifier)) { //if text includes the pill's id:
                                        matchescount += 1; //increase matchescount by 1
                                    }
                                });
                                if (matchescount > 0) { //at the end of each loop, if matchescount is greater than 0:
                                    imageidmap.set(imageitem.id, imageidmap.get(imageitem.id) + 1); //increment the value of the image-item id in the imageidmap by 1
                                }
                            });
                        });
                        const lengthofsetofAccordions = setofActiveAccordions.size; //get the size of the set (so we can compare how many matches a pill has to how many accordions there are
                        imageidmap.forEach((itemvalue, item) => {
                            // item is the image id, itemvalue is the count
                            if (parseInt(itemvalue) === parseInt(lengthofsetofAccordions)) { //if the value of the item in the imageidmap is equal to the length of the setofActiveAccordions:
                                const tochange = document.getElementById(item); //get the image-item with the id of the item
                                tochange.classList.remove('hidden'); //remove the hidden class
                                tochange.setAttribute('data-toggle', 'lightbox'); //add the data-toggle attribute
                                tochange.setAttribute('data-gallery', 'photo_gallery'); //add the data-gallery attribute
                            } else { //if the value of the item in the imageidmap is not equal to the length of the setofActiveAccordions:
                                const tochange = document.getElementById(item); //get the image-item with the id of the item
                                tochange.classList.add('hidden'); //add the hidden class
                                tochange.removeAttribute('data-toggle'); //remove the data-toggle attribute
                                tochange.removeAttribute('data-gallery'); //remove the data-gallery attribute
                            }
                        })
                    }
                }

                formWatch.addEventListener('submit', function (event) { //add event listener to the submit in the sidebar
                    event.preventDefault(); //prevent the page from reloading
                    searchInput.value = ''; //clear the searchbar
                    filteringImages(); //call the filtering images function
                });

                function restoreDefaults() { //code for the restore defaults button
                    // Reset pills
                    Array.from(allthePills).forEach(pill => {
                        pill.classList.remove('pill--active');
                        pill.classList.remove('pill--shown');
                    });

                    // Reset slider
                    sliderOne.value = sliderOneDefault;
                    sliderTwo.value = sliderTwoDefault;
                    displayValOne.textContent = sliderOneDefault;
                    displayValTwo.textContent = sliderTwoDefault;
                    fillColor();
                    sliderContainer.classList.remove("slider--active");

                    // Reset search fields
                    yearSearch.value = '';
                    trenchSearch.value = '';
                    searchInput.value = '';

                    // Show all images
                    Array.from(imagestoFilter).forEach(image => {
                        image.classList.remove('hidden');
                        image.setAttribute('data-toggle', 'lightbox');
                        image.setAttribute('data-gallery', 'photo_gallery');
                    });

                    // Hide "no results" message
                    noResultsMessage.style.display = 'none';
                }

                restoreDef.addEventListener("click", restoreDefaults); //gets called when clicked on

            </script>
            <!-------------------------------------------------------------------------------------------------------------------------->
        </div>

    </main>
    <!--SCRIPT TAGS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bs5-lightbox@1.8.5/dist/index.bundle.min.js"></script>

</body>

</html>
